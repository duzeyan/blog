#基于运动检测的图像融合算法

## 一、Z-Score定义

　　标准分数（standard score）也叫z分数（z-score）,是一个分数与平均数(或中位数)的差再除以标准差的过程。用公式表示为：`z=(x-μ)/σ`。其中x为某一具体分数，μ为平均数，σ为标准差。Z值的量代表着原始分数和母体平均值之间的距离，是以标准差为单位计算。在原始分数低于平均值时Z则为负数，反之则为正数。

## 二、Z-Score在论文中的表述
　　公式为分子部分改为x-median。其中median为一组3维数据的中位数。分母部分为x-median的中位数。也就是该数据与平均水平的差距和平均差距的比例。式子中的0.6745为调整参数。因为后来用来区分做筛选的阈值bata是一个实验定值。论文中位10。对不同的实验对象应该调整这两个参数。

## 三、论文中的应用
    
 　　对于我们的实验视频，运动的像素（IFD的绝对值到一定程度）相对来说是比较小的。而对于不动的背景部分我们完全可以用简化的方法来进行融合。背景部分甚至可以是看做信息的冗余，因为如果每一帧的特定区域都是不变的，那么完全可以用一帧的信息来代表多帧的信息。该算法提高效率的基本方法就是基于此的。另外因为有针对的使用参数提取了运动区域，所以连续性和稳定性会比较好。


## 五、主要算法过程

   -  计算所有数据的Z指数，并且和阈值进行比较划分出在步长为1情况下的运动检测。如果在一个金字塔滤波方向上的任意一个点值得**Z指数大于阈值（条件1）**，则该金字塔滤波器其他子方向上的与该点对应的点都被认为是运动性的。最后决定一个点是否属于移动的，需要不仅该点`p1（x,y,t）`满足条件1，而且必须点的前帧对应点`p0(x,y,t-1)`也要满足条件1。当满足这些条件时，就把该点划归到移动区域。
   -  原始视频A被划为移动和静态两个区域。同理视频B也是一样。如果对于某分辨率某方向下的点`p(x,y,t)`满足融合条件1，则取视频A的ST系数。如果满足融合条件2，则取视频B的ST系数。如果满足融合条件3，则分别计算该点在各个方向上(k)时间维度上的**局部能量**E1，E2，如果E1大于E2则取视频A的ST系数，反之则取B的。如果满足融合条件4，则计算点在整个时间维度上的平局能量。在此基础上在计算一次局部能量（相当于是图像的能量）。利用该能量进行判断融合ST的取值。
   -  条件1：该点在A视频上ST系数检测到运动，而在B视频上的ST系数没有检测到运动
   -  条件2：该点在B视频上ST系数检测到运动，而在A视频上的ST系数没有检测到运动
   -  条件3：该点在A视频上ST系数检测到运动，在B视频上的ST系数也检测到运动
   -  条件4：该点在B视频上ST系数没有检测到运动，在B视频上的ST系数也没有检测到运动
## 六、算法的缺点
1. 运动区域的模糊，运动区域不可避免的在各个分辨率和子方向上被识别为背景（或者反过来），从而因为算法的平均操作而变得模糊。为了弄清视频模糊的原因。把公式19那一步修改了。改为在每个时间上去算能量。再取ST系数，最后的结果没有得到模糊效果。花的时间大概是原算法的3倍.但是比3Denergy用的时间短。基本上相当于2D-energy算法了。
2. 为什么同一个金字塔方向上的所有子带运动检测会被其他子带所影响。
